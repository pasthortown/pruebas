package com.corlasosa.kfc.despachador.formateado;

import com.corlasosa.kfc.despachador.ProcesaPromocionCupones;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.print.PageFormat;
import java.awt.print.Printable;
import java.util.logging.Level;
import java.util.logging.Logger;

public class IntroPagePromocionCupones implements Printable {
  private String tabla = null;
  
  public String getTabla() {
    return this.tabla;
  }
  
  public void setTabla(String tabla) {
    this.tabla = tabla;
  }
  
  public int ValidaTitulos(String psCadena) {
    int valor = 0;
    String lsCadena = "********";
    String[] arreglo = lsCadena.split(",");
    for (int i = 0; i < arreglo.length; i++) {
      if (psCadena.indexOf(arreglo[i]) >= 0)
        valor = 1; 
    } 
    return valor;
  }
  
  public void drawCenteredString(String s, int w, int h, Graphics g, int py) {
    FontMetrics fm = g.getFontMetrics();
    int x = (w - fm.stringWidth(s)) / 2;
    g.drawString(s, x, py);
  }
  
  public void drawStringDerA(Graphics g, String line, int wc, int lineW, int y, int valor) {
    g.drawString(line, valor - lineW, y);
  }
  
  public int print(Graphics g, PageFormat pageFormat, int page) {
    try {
      Graphics2D g2d = (Graphics2D)g;
      g2d.translate(pageFormat.getImageableX(), pageFormat.getImageableY());
      int lInicio = 0;
      int lFin = 0;
      String lLinea = null;
      String lLineaAux = null;
      String formato = "Arial";
      int tamanio = 7;
      int x = 0;
      int y = 0;
      String ptabla = this.tabla;
      x = 10;
      y = 10;
      int i = 0;
      do {
        if (i < 1) {
          lInicio = ptabla.indexOf("<");
          lFin = ptabla.indexOf(">");
          lLinea = ptabla.substring(lInicio + 1, lFin);
          String cadenaImp = ptabla.substring(lInicio + 1, lFin);
          String linea1 = cadenaImp;
          Font linea1Font = new Font(formato, 1, tamanio);
          lLineaAux = ptabla.substring(ptabla.indexOf(">") + 1, ptabla.length());
          g2d.setFont(linea1Font);
          g2d.getFontMetrics(linea1Font);
          drawCenteredString(linea1.trim(), Integer.parseInt("200"), Integer.parseInt("100"), g2d, y);
        } else {
          lInicio = lLineaAux.indexOf("<");
          lFin = lLineaAux.indexOf(">");
          lLinea = String.valueOf(lLinea) + lLineaAux.substring(lInicio + 1, lFin);
          String cadenaImp = lLineaAux.substring(lInicio + 1, lFin);
          String linea2 = cadenaImp;
          Font linea2Font = new Font(formato, 2, tamanio);
          lLineaAux = lLineaAux.substring(lLineaAux.indexOf(">") + 1, lLineaAux.length());
          g2d.setFont(linea2Font);
          g2d.getFontMetrics(linea2Font);
          if (i <= 7) {
            Font fuenteTitulo = new Font(formato, 1, tamanio);
            g2d.setFont(fuenteTitulo);
            drawCenteredString(linea2.trim(), Integer.parseInt("200"), Integer.parseInt("100"), g2d, y);
          } else {
            drawCenteredString(linea2.trim(), Integer.parseInt("200"), Integer.parseInt("100"), g2d, y);
          } 
        } 
        y += 8;
        i++;
      } while (lLineaAux.indexOf(">") > 0);
    } catch (Exception ex) {
      Logger.getLogger(ProcesaPromocionCupones.class.getName()).log(Level.SEVERE, (String)null, ex);
    } 
    return 0;
  }
}
